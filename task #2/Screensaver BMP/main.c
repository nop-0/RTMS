#include <stdio.h>
#include "NUC1xx.h"
#include "SYS.h"
#include "SPI.h"
#include "LCD.h"



unsigned char FIG1[32*8]=
{
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xF0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xFC,0x1C,0x1F,0x07,0x07,0x03,0xFF,0xFF,0x03,0x07,0x07,0x1C,0xFC,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x1F,0x7F,0x73,0xE3,0xE3,0xC3,0xFF,0xFF,0xC3,0xE3,0xF3,0x73,0x3F,0x07,0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x1F,0x1F,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

unsigned char FIG2[32*8]=
{
 	0x00,0x00,0x00,0x10,0x38,0x70,0xE0,0xC0,0x80,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x80,0xC0,0xE0,0x70,0x38,0x10,0x00,0x00,0x00,
 	0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xF1,0x7F,0x1F,0x0F,0x1F,0x3B,0x71,0xE1,0xC1,0xC1,0xE1,0x71,0x39,0x1F,0x0F,0x07,0x0F,0x7D,0xF0,0xC0,0x00,0x00,0x00,0x00,0x00,
 	0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x9F,0xFC,0xF0,0xF0,0xF8,0x9C,0x8E,0x87,0x03,0x03,0x07,0x8E,0x9C,0xB8,0xF0,0xE0,0xF0,0xBC,0x1F,0x07,0x00,0x00,0x00,0x00,0x00,
 	0x00,0x00,0x00,0x08,0x1C,0x0E,0x07,0x03,0x01,0x00,0x00,0x01,0x01,0x01,0x03,0x03,0x03,0x03,0x03,0x01,0x01,0x01,0x00,0x01,0x03,0x07,0x0E,0x1C,0x08,0x00,0x00,0x00
};


int32_t main(void)
{
	int8_t x,y;
	int8_t movX=3, dirX=1;
	int8_t movY=3, dirY=1;
	
	int DELAY_TIME = 200000;
	int stateX = 0;
	int stateY = 0;
	
	UNLOCKREG();
	DrvSYS_Open(50000000);
	LOCKREG();
	
	init_LCD();
	clear_LCD();
	
	x=32;
	y=16;

	while (TRUE)
	{
					
		if(x<0)							//checks for boundaries
		{	
			dirX=1;
			stateX=0;
		}		
		if(x>LCD_Xmax-32)
		{
			dirX=-1;
			stateX=1;
		}
		if(y<0)	
		{
			dirY=1;
			stateY=0;
		}
		if(y>LCD_Ymax-32)
		{
			dirY=-1;
			stateY=1;
		}
		
		x = x + dirX*movX; //continous movement
		y = y + dirY*movY;
		
		if(stateX!=0 || stateY!=0){
		draw_Bmp32x32(x,y,FG_COLOR,BG_COLOR,FIG2);
		DrvSYS_Delay(DELAY_TIME);
		draw_Bmp32x32(x,y,BG_COLOR,BG_COLOR,FIG2);
		stateX=0;
		}
		
		else{
		draw_Bmp32x32(x,y,FG_COLOR,BG_COLOR,FIG1);
		DrvSYS_Delay(DELAY_TIME);
		draw_Bmp32x32(x,y,BG_COLOR,BG_COLOR,FIG1);
		stateY=0;	
		}	
	}
}